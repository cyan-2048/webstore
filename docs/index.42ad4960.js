(()=>{function e(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}last_check=null!=localStorage.versions?last_check=JSON.parse(localStorage.versions):last_check={non_existed:1},proxy=null!=localStorage.proxy?proxy=JSON.parse(localStorage.proxy):proxy="https://api.allorigins.win/raw?url=",ratings=null!=localStorage.ratings?ratings=JSON.parse(localStorage.ratings):ratings="https://bhackers.uber.space/srs/v1",database=null!=localStorage.database?database=JSON.parse(localStorage.database):database="https://banana-hackers.gitlab.io/store-db/data.json",new_versions={},(()=>{index=0;var e=!1;function t(){if(index+=1,index==data.apps.length||e)return index=0,e||(localStorage.versions=JSON.stringify(last_check)),void(e=!1);update()}cancel_update=()=>{e=!0},update=()=>{var e=data.apps[index];function a(a){last_check[e.slug]&&last_check[e.slug]!=a.version&&(new_versions[e.slug]={from:last_check[e.slug],to:a.version}),last_check[e.slug]=a.version,t()}fetch(e.download.manifest).then((e=>e.json())).then((e=>a(e))).catch((r=>{console.error(r),fetch(proxy+e.download.manifest).then((e=>e.json())).then((e=>a(e))).catch((e=>t()))}))}})();fetch(database).then((e=>e.json())).catch((e=>{console.error(e),alert("can't download database please reload the page")})).then((e=>{data=e,"complete"===document.readyState||"interactive"===document.readyState?t():window.addEventListener("DOMContentLoaded",(()=>{t(void 0)})),fetch(ratings+"/download_counter/").then((e=>e.json())).then((e=>{data.dl=e;var t,a=document.getElementById("sort");"SEL"==a.tagName?((t=document.createElement("opt")).innerHTML='<i class="fas fa-fire-alt"></i>Popularity',t.setAttribute("value","pop"),a.querySelector("drop").appendChild(t)):((t=document.createElement("option")).innerText="Popularity",t.value="pop",a.add(t))})).catch((e=>{console.error(e),alert("can't download download counts, store will not have download count functionality")})).then((()=>{fetch(ratings+"/ratings").then((e=>e.json())).then((e=>{data.ratings=e;var t,a=document.getElementById("sort");"SEL"==a.tagName?((t=document.createElement("opt")).innerHTML='<i class="fas fa-star"></i>Ratings',t.setAttribute("value","ra"),a.querySelector("drop").appendChild(t)):((t=document.createElement("option")).innerText="Ratings",t.value="ra",a.add(t))})).catch((e=>{console.error(e),alert("can't download download ratings, store will not have ratings functionality")}))}))}));var t=e=>{var t=null==e?"app":document.querySelector("#category .selected").dataset.name;document.getElementById("category").innerHTML="<style></style>";var r=[];for(var c in r.push("app"),data.categories)r.push(data.categories[c].name);var i="";r.forEach(((e,a)=>{var n=document.getElementById("category"),l=document.createElement("button"),o=e.toLocaleLowerCase(),c="fas fa-store";try{c=data.categories[o].icon}catch(e){}"app"==e?l.innerText=" All Apps":(l.innerText=" "+e,null!=data.categories[o].description&&(l.title=data.categories[o].description));var d=document.createElement("i");d.className=c,l.insertBefore(d,l.childNodes[0]),l.dataset.name=o,i+=`[data-sel="${o}"] + #apps div.${o}`,a==r.length-1?i+="{ display: flex !important}":i+=",",n.parentElement.dataset.sel=t,n.appendChild(l)})),document.querySelector(`#category [data-name='${t}']`).className="selected",document.getElementById("category").querySelector("style").innerHTML=i,a(),document.getElementById("apps").children[0].innerHTML="";var d=!0,s=!1,u=void 0;try{for(var p,m=data.apps[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var y=p.value,h=document.createElement("div"),g=document.createElement("div");g.className="header";var v=document.createElement("img");v.src=y.icon,v.alt=" ",g.appendChild(v);var f=document.createElement("div");f.className="cat",f.innerText=y.meta.categories.map((e=>l(e))).join(", ");var b=document.createElement("div");b.className="na",b.innerText=y.name;var S=document.createElement("div");S.className="au",S.innerText=y.author[0].split("<")[0];var E=document.createElement("div");E.className="teco",E.appendChild(f),E.appendChild(b),E.appendChild(S),g.appendChild(E),h.appendChild(g),h.appendChild(document.createTextNode(o(y.description,206)));var x=document.createElement("div");x.className="spacer",h.appendChild(x);var w=document.createElement("a");w.className="info",w.innerHTML='<i class="fas fa-info-circle"></i> Info',w.href=`#${y.slug}`;var C=document.createElement("a");C.href=y.download.url,C.innerHTML='<i class="fas fa-file-download"></i> Download';var T=null;navigator.userAgent.toLocaleLowerCase().includes("kaios")||((T=document.createElement("button")).className="share",T.innerHTML='<i class="far fa-clipboard"></i> Share');var N=document.createElement("div");N.className="bucon",N.appendChild(w),N.appendChild(C),null!=T&&N.appendChild(T),h.appendChild(N),h.className="app",h.dataset.slug=y.slug;var q=!0,k=!1,L=void 0;try{for(var A,_=y.meta.categories[Symbol.iterator]();!(q=(A=_.next()).done);q=!0){var B=A.value;h.classList.add(B)}}catch(e){k=!0,L=e}finally{try{q||null==_.return||_.return()}finally{if(k)throw L}}document.getElementById("apps").children[0].appendChild(h)}}catch(e){s=!0,u=e}finally{try{d||null==m.return||m.return()}finally{if(s)throw u}}null!=e?location.hash="":(document.querySelector("#splash #image").className="loaded",document.getElementById("splash").style="opacity: 0; visibility: hidden"),""!=location.hash&&n(void 0),document.getElementById("le").innerText=document.querySelectorAll('[data-sel="app"] + #apps .app').length};function a(e){switch(data.apps.sort(((e,t)=>e.name.localeCompare(t.name))),document.getElementById("sort").selectedOptions?document.getElementById("sort").selectedOptions[0].value:document.querySelector("#sort cho").getAttribute("value")){case"cab":data.apps.sort(((e,t)=>e.meta.categories[0].localeCompare(t.meta.categories[0])));break;case"ra":data.apps.sort(((e,t)=>{var a=0;return!data.ratings[e.slug]||(data.ratings[t.slug]&&(a=data.ratings[t.slug].average_rating),data.ratings[e.slug].average_rating<a)}));break;case"pop":data.apps.sort(((e,t)=>{var a=0;return!data.dl[e.slug]||(data.dl[t.slug]&&(a=data.dl[t.slug]),data.dl[e.slug]<a)}))}null!=e&&e.target&&t(e)}window.addEventListener("DOMContentLoaded",(()=>{if((navigator.userAgent.toLocaleLowerCase().includes("kaios")?document.querySelector("sel"):document.querySelector("select")).remove(),"SELECT"==document.getElementById("sort").tagName&&(document.getElementById("sort").onchange=a),document.getElementById("category").onclick=e=>{var t=e.target;if("BUTTON"==t.tagName){t.parentElement.parentElement.dataset.sel=t.dataset.name;var a=!0,r=!1,n=void 0;try{for(var l,o=t.parentElement.children[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){l.value.removeAttribute("class")}}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}t.className="selected",document.getElementById("le").innerText=document.querySelectorAll(`[data-sel="${t.dataset.name}"] + #apps .${t.dataset.name}`).length}},!navigator.userAgent.toLocaleLowerCase().includes("kaios")){var e=document.createElement("button");e.id="scrollup";var t=document.createElement("i");t.className="fas fa-chevron-up",e.appendChild(t),document.body.appendChild(e),/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())?e.style.transform="none":document.getElementById("apps").addEventListener("wheel",(function(t){if(0!=document.body.scrollTop)if(t.deltaY<0&&"translateY(70px)"==e.style.transform)e.style.transform="none";else{if(!(t.deltaY>0&&"none"==e.style.transform))return;e.style.transform="translateY(70px)"}else e.style.transform="translateY(70px)"}))}})),document.onclick=e=>{if("OPT"==e.target.tagName){document.activeElement.blur();var t=e.target.parentElement.parentElement.children[0];t.innerHTML="";var r=!0,n=!1,l=void 0;try{for(var o,c=e.target.childNodes[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value.cloneNode(!0);t.appendChild(i)}}catch(e){n=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw l}}t.setAttribute("value",e.target.getAttribute("value")),a(e)}else"share"==e.target.className?function(e){if(navigator.clipboard)navigator.clipboard.writeText(e).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)}));else{var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var a=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+a)}catch(e){console.error("Fallback: Oops, unable to copy",e)}document.body.removeChild(t)}}(location.origin+"/#"+e.target.parentElement.parentElement.dataset.slug):"scrollup"==e.target.id?document.body.scrollTo({top:0,behavior:"smooth"}):"cards"==e.target.id&&document.querySelector("#appcard .close").click()},window.onhashchange=n;var r=!1;function n(e){var t=location.hash.split("#")[1],a=document.querySelector(`.app[data-slug="${t}"]`),n=200;if("app"==document.querySelector("#category").dataset.sel&&(n=0),null!=a&&""!=location.hash&&(null==e&&document.querySelector("button[data-name=app]").click(),setTimeout((()=>{var e=a.getBoundingClientRect(),t=e.top-document.body.getBoundingClientRect().top+e.height/2;document.body.scrollBy({left:0,top:t-window.innerHeight/2,behavior:"smooth"})}),n)),r&&""==location.hash)document.querySelector("#appcard .close").click();else{var c=data.apps.find((e=>e.slug==t));if(null!=c){document.body.style.overflow="hidden";var i=document.getElementById("appcard");i.querySelector("#head img").src="",i.querySelector("#head img").src=c.icon,i.querySelector("#head img").alt="e",i.querySelector("#boxue #na").innerText=c.name,i.querySelector("#boxue #ca").innerText=c.meta.categories.map((e=>l(e))).join(", "),i.querySelector("#boxue #de").innerText=c.author[0].split("<")[0];var d=!0,s=!1,u=void 0;try{for(var p,m=i.querySelectorAll("#ave #to, #appcard > #de")[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var y=p.value,h=!0,g=!1,v=void 0;try{for(var f,b=y.childNodes[Symbol.iterator]();!(h=(f=b.next()).done);h=!0){var S=f.value;null!=S.id&&null!=S.className||S.remove()}}catch(e){g=!0,v=e}finally{try{h||null==b.return||b.return()}finally{if(g)throw v}}}}catch(e){s=!0,u=e}finally{try{d||null==m.return||m.return()}finally{if(s)throw u}}var E=!0,x=!1,w=void 0;try{for(var C,T=i.querySelectorAll("#scr #img,#bucon,#spe ul,#chat")[Symbol.iterator]();!(E=(C=T.next()).done);E=!0){C.value.innerHTML=""}}catch(e){x=!0,w=e}finally{try{E||null==T.return||T.return()}finally{if(x)throw w}}i.querySelector("#appcard > #de").appendChild(document.createTextNode(c.description));var N=document.createElement("a");if(N.href=c.download.url,N.innerText="Download",i.querySelector("#bucon").appendChild(N),0==c.screenshots.length)i.querySelector("#scr").style.display="none";else{i.querySelector("#scr").style="display: block";var q=!0,k=!1,L=void 0;try{for(var A,_=c.screenshots[Symbol.iterator]();!(q=(A=_.next()).done);q=!0){var B=A.value,I=document.createElement("img");I.src=B,I.onerror=e=>{e.target.remove()},i.querySelector("#scr #img").appendChild(I)}}catch(e){k=!0,L=e}finally{try{q||null==_.return||_.return()}finally{if(k)throw L}}}var $=i.querySelector("#spe ul"),j=!0,O=!1,M=void 0;try{for(var H,D=function(e,t){var a=t.value;if(c[a]){var r;if(c[a][0].includes("<")&&1==c[a].length){var n=document.createElement("a"),l=c[a][0].split("<")[1].split(">")[0];c[a][0].includes("@")?n.href="mailto:"+l:n.href=l,n.target="_blank",n.innerText=c[a][0].split("<")[0],r=n}else 1!=c[a].length?(r=[],c[a].forEach(((e,t)=>{if(e.includes("<")){var n=document.createElement("a"),l=e.split("<")[1].split(">")[0];e.includes("@")?n.href="mailto:"+l:n.href=l,n.innerText=e.split("<")[0],n.target="_blank",r.push(n)}else r.push(document.createTextNode(e));t!=c[a].length-1&&r.push(document.createTextNode(", "))}))):c[a][0].includes("<")||1!=c[a].length||(r=c[a][0]);var o="author"==a?"Developers":"Maintainers";$.appendChild(oe(o,r))}},J=["author","maintainer"][Symbol.iterator]();!(j=(H=J.next()).done);j=!0)D(0,H)}catch(e){O=!0,M=e}finally{try{j||null==J.return||J.return()}finally{if(O)throw M}}var R,Y,F=!0,P=!1,U=void 0;try{for(var V,z=["website","git_repo","donation"][Symbol.iterator]();!(F=(V=z.next()).done);F=!0){var G=V.value;if(c[G]){var K=document.createElement("a");K.innerText=c[G],K.target="_blank",K.href=c[G];var Q="Repository";switch(G){case"website":case"donation":Q=l(G)}$.appendChild(oe(Q,K))}}}catch(e){P=!0,U=e}finally{try{F||null==z.return||z.return()}finally{if(P)throw U}}if(last_check[c.slug]&&$.appendChild(oe("Version",last_check[c.slug])),$.appendChild(oe("Type",l(c.type))),c.locales&&$.appendChild(oe("Languages",c.locales.join(", "))),$.appendChild(oe("Anti-features",`Ads: ${c.has_ads}\n Tracking: ${c.has_tracking}`)),c.license){var W;if(c.license.includes("<")){var X=document.createElement("a"),Z=c.license.split("<")[1].split(">")[0];X.href=Z,X.innerText=c.license.split("<")[0],X.target="_blank",W=X}else W=c.license;$.appendChild(oe("License",W))}if(data.dl&&data.dl[c.slug]&&$.appendChild(oe("Downloads",data.dl[c.slug].toString())),data.ratings&&data.ratings[c.slug]){var ee=data.ratings[c.slug];i.querySelector("#ra").style.display="block",i.querySelector("#ave #sco").innerText=ee.average_rating.toFixed("1"),i.querySelector("#ave #stars").style=`--stars:${ee.average_rating/5*100}%`,i.querySelector("#ave #to").appendChild(document.createTextNode(`${ee.rating_count} total`));var te=!0,ae=!1,re=void 0;try{for(var ne,le=i.querySelectorAll("#cha *")[Symbol.iterator]();!(te=(ne=le.next()).done);te=!0){ne.value.style="--to:0%"}}catch(e){ae=!0,re=e}finally{try{te||null==le.return||le.return()}finally{if(ae)throw re}}R=c.slug,Y=(e,t)=>{if(location.hash=="#"+c.slug&&"eroor404"!=e){[1,2,3,4,5].forEach((t=>{var a=e.ratings.filter((e=>e.points==t)).length;i.querySelector(`#appcard [data-r="${t}"]`).style=`--to:${a/ee.rating_count*100}%`}));var a=i.querySelector("#chat"),r=!0,n=!1,l=void 0;try{for(var d,s=e.ratings[Symbol.iterator]();!(r=(d=s.next()).done);r=!0){var u=d.value,p=document.createElement("div"),m=document.createElement("div");m.className="tie",m.appendChild(document.createTextNode(`@${o(u.username,14)}`));var y=document.createElement("div");y.id="stars",y.style=`--stars:${u.points/5*100}%`,m.appendChild(y),m.appendChild(document.createTextNode(new Date(1e3*u.creationtime).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}))),p.appendChild(m),p.appendChild(document.createTextNode(u.description)),a.appendChild(p)}}catch(t){n=!0,l=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw l}}}},fetch(`${ratings}/ratings/${R}`).then((e=>e.json())).then((e=>Y(e))).catch((e=>Y("eroor404",e)))}else i.querySelector("#ra").style.display="none";document.getElementById("cards").style="opacity:1;visibility:visible",document.getElementById("appcard").style="transform:translate(50%, -50%)",r=!0,document.querySelector("#appcard .close").addEventListener("click",(function e(){document.querySelector("#appcard .close").removeEventListener("click",e),r=!1,location.hash="",document.getElementById("cards").removeAttribute("style"),document.getElementById("appcard").removeAttribute("style"),document.body.style.overflow="auto"}))}}function oe(e,t){var a=document.createElement("li"),r=document.createElement("div");r.className="a",r.innerText=e,a.appendChild(r);var n=document.createElement("div");n.className="b";var l=!0,o=!1,c=void 0;if("string"==typeof t)n.innerText=t;else if(Array.isArray(t))try{for(var i,d=t[Symbol.iterator]();!(l=(i=d.next()).done);l=!0){var s=i.value;n.appendChild(s)}}catch(e){o=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(o)throw c}}else n.appendChild(t);return a.appendChild(n),a}}var l=function(t){var a=e(t),r=a[0],n=a.slice(1),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.language;return r.toLocaleUpperCase(l)+n.join("")},o=(e,t)=>e.length>t?e.substr(0,t-1)+"…":e})();